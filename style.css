* { 
  box-sizing: border-box; 
  -webkit-tap-highlight-color: transparent;
}

body { 
  margin:0; 
  font-family:Arial,sans-serif; 
  background:#111; 
  color:#eee; 
  height:100vh; 
  overflow:hidden; 
  touch-action: manipulation;
}

.screen { display:none; height:100%; width:100%; }
.active { display:flex; }

button, input { 
  padding:8px 12px; 
  font-size:14px; 
  cursor:pointer;
  border: 2px solid #6b3fa0;
  background: #2a1a3a;
  color: white;
  border-radius: 6px;
}

button:active {
  transform: scale(0.95);
}

/* LOGIN */
#loginScreen {
  justify-content:center;
  align-items:center;
  flex-direction:column;
  gap:12px;
  padding: 20px;
}

#loginScreen h1 {
  font-size: clamp(20px, 5vw, 32px);
  text-align: center;
}

/* CHARACTER SELECT */
#characterSelectScreen {
  flex-direction:column;
  justify-content:flex-start;
  align-items:center;
  gap:15px;
  padding: 20px 10px 80px 10px; /* Alt padding arttırıldı */
  overflow-y: auto;
  position: relative;
}

#characterSelectScreen h2 {
  font-size: clamp(18px, 4vw, 24px);
  margin: 10px 0;
}

.cardRow {
  display:flex;
  gap:15px;
  flex-wrap:wrap;
  justify-content:center;
  width: 100%;
  max-width: 800px;
}

.charCard {
  background:#1f1f1f;
  border:2px solid #6b3fa0;
  border-radius:8px;
  padding:12px;
  width: calc(33.333% - 10px);
  min-width: 160px;
  max-width: 200px;
  text-align:center;
  cursor:pointer;
  transition: all 0.3s;
  position: relative;
}

.charCard:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(107, 63, 160, 0.5);
}

.charCard.selected {
  border-color: gold;
  box-shadow: 0 0 20px gold;
}

.charCard img {
  width:80px;
  height:80px;
  object-fit:cover;
  border-radius:50%;
  margin-bottom:8px;
}

.charStats {
  font-size: 10px;
  margin-top: 4px;
  color: #aaa;
}

.rerollCardBtn {
  margin-top: 8px;
  width: 100%;
  padding: 6px;
  font-size: 12px;
}

.selectButtons {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  width: 100%;
  max-width: 100%;
  text-align: center;
  padding: 15px 20px;
  background: linear-gradient(to top, #111 80%, transparent);
  z-index: 100;
  border-top: 2px solid #6b3fa0;
}

#confirmBtn {
  width: 100%;
  max-width: 400px;
  padding: 16px;
  font-size: 18px;
  font-weight: bold;
  background: linear-gradient(135deg, #6b3fa0 0%, #8b5fc0 100%);
  box-shadow: 0 4px 15px rgba(107, 63, 160, 0.6);
  border: 3px solid gold;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); box-shadow: 0 6px 20px rgba(107, 63, 160, 0.8); }
}

/* GAME - Desktop */
#gameScreen {
  display:grid;
  grid-template-columns: 280px 1fr 320px;
  height:100vh;
}

.panel {
  border:3px solid #6b3fa0;
  margin:6px;
  padding:8px;
  display:flex;
  flex-direction:column;
  gap:10px;
  overflow-y:auto;
}

.rightPanel {
  display: flex;
  flex-direction: column;
  gap: 10px;
  overflow: hidden;
}

.rightPanel h3 {
  margin: 0;
  font-size: 15px;
  font-weight: bold;
  color: #c28b4b;
  border-bottom: 2px solid #6b3fa0;
  padding-bottom: 4px;
  flex-shrink: 0;
}

.rightPanel #achievementArea {
  flex-shrink: 0;
  overflow-y: auto;
  min-height: 140px;
  max-height: 180px;
}

.rightPanel .log {
  flex: 1;
  overflow-y: auto;
  min-height: 200px;
  font-size: 13px;
  line-height: 1.5;
}

.leftBox {
  border: 1px solid #444;
  padding: 8px;
  border-radius: 6px;
  background: #1a1a1a;
  flex-shrink: 0;
}

.leftBox h3 {
  margin: 0 0 8px 0;
  font-size: 14px;
  color: #c28b4b;
}

.centerPanel {
  border:3px solid #c28b4b;
  margin:6px;
  padding:10px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}

.portrait {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #c28b4b;
  margin: 0 auto 8px auto;
  display: block;
}

/* Bars */
.bar { 
  background:#333; 
  border:1px solid #555; 
  height:16px; 
  overflow:hidden; 
  border-radius:4px; 
}
.barFill { height:100%; transition: width 0.3s; }
.hp { background:#d32f2f; }
.mana { background:#2196f3; }

.gold { color: gold; font-weight: bold; }

.barContainer {
  position: relative;
  margin-top: 4px;
}

.barValueText {
  position: absolute;
  width: 100%;
  text-align: center;
  font-size: 11px;
  top: -15px;
  color: #fff;
}

/* Inventory */
.itemGrid {
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:3px;
}

.itemSlot {
  width:100%;
  aspect-ratio: 1;
  border:2px solid #555;
  background:#1a1a1a;
  position:relative;
  cursor:pointer;
  border-radius:4px;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.itemSlot:hover {
  border-color: #c28b4b;
  transform: scale(1.1);
}

.itemSlot.passive {
  border-color: #9c27b0;
  background: #2a1a3a;
}

.itemSlot img {
  max-width:70%;
  max-height:70%;
}

.stackCount {
  position:absolute;
  right:2px;
  bottom:2px;
  font-size:10px;
  background:black;
  padding:2px 4px;
  border-radius:3px;
  color: #4caf50;
  font-weight: bold;
}

.passiveBadge {
  position: absolute;
  top: 2px;
  left: 2px;
  background: #9c27b0;
  color: white;
  font-size: 9px;
  padding: 2px 4px;
  border-radius: 3px;
  font-weight: bold;
}

/* Shop */
.shopOverlay {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.95);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index: 1000;
  padding: 20px;
  overflow-y: auto;
}

.shopPanel {
  background:#1c1c1c;
  border:3px solid #c28b4b;
  padding:20px;
  width: 100%;
  max-width: 600px;
  border-radius: 10px;
  max-height: 90vh;
  overflow-y: auto;
}

.shopPanel h2 {
  margin-top: 0;
  font-size: clamp(18px, 4vw, 24px);
}

#shopGrid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap:12px;
  margin-bottom: 15px;
}

#companionGrid {
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:15px;
}

@media (max-width: 768px) {
  #companionGrid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  #companionGrid {
    grid-template-columns: 1fr;
  }
}

.shopItem {
  text-align:center;
  padding: 10px;
  border: 1px solid #444;
  border-radius: 6px;
  background: #222;
  transition: all 0.2s;
}

.shopItem:hover {
  border-color: #c28b4b;
  background: #2a2a2a;
}

.shopPanel img {
  width:64px;
  height:64px;
  object-fit:contain;
  margin-bottom: 8px;
}

.itemName {
  font-size: 13px;
  margin: 5px 0;
}

.shopItem button {
  margin-top: 8px;
  width: 100%;
  font-size: 12px;
  padding: 6px;
}

.shopItem button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* Tooltip */
.tooltip {
  position: fixed;
  background: #111;
  border: 2px solid gold;
  padding: 10px;
  color: #fff;
  font-size: 12px;
  border-radius: 6px;
  z-index: 9999;
  pointer-events: none;
  max-width: 200px;
  box-shadow: 0 0 15px rgba(0,0,0,0.8);
  display: none;
}

.itemHover {
  outline: 2px solid gold;
  outline-offset: 2px;
}

/* Log */
.log {
  flex: 1;
  overflow-y: auto;
  border: 1px solid #555;
  padding: 8px;
  font-size: 13px;
  background: #0f0f0f;
  border-radius: 4px;
  line-height: 1.6;
}

.log div {
  padding: 5px 4px;
  border-bottom: 1px solid #222;
  margin-bottom: 2px;
}

/* Battle Area */
.battleArea {
  display: flex;
  gap: 15px;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  padding: 20px 10px;
  flex: 1;
}

.enemyCard {
  background: #1a1a1a;
  border: 3px solid #555;
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  min-width: 140px;
  max-width: 200px;
}

.enemyCard:hover {
  border-color: #c28b4b;
  transform: scale(1.05);
}

.enemyCard.selected {
  border-color: #ff4444;
  box-shadow: 0 0 20px #ff4444;
}

.enemyCard img {
  width: 100px;
  height: 100px;
  margin: 10px 0;
  border-radius: 10px;
  border: 2px solid #c28b4b;
}

.enemyName {
  font-weight: bold;
  color: #c28b4b;
  margin-bottom: 8px;
  font-size: 14px;
}

.enemyStats {
  font-size: 11px;
  color: #aaa;
  margin-top: 8px;
}

.battleButtons {
  display: flex;
  gap: 10px;
  justify-content: center;
  padding: 10px;
  flex-wrap: wrap;
}

.battleButtons button {
  padding: 12px 20px;
  font-size: 14px;
  border: 2px solid #6b3fa0;
  background: #2a1a3a;
  color: white;
  border-radius: 6px;
  transition: all 0.2s;
  flex: 1;
  min-width: 100px;
}

.battleButtons button:hover {
  background: #3a2a4a;
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(107, 63, 160, 0.5);
}

.battleButtons button:active {
  transform: scale(0.95);
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #1a1a1a;
}

::-webkit-scrollbar-thumb {
  background: #6b3fa0;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #8b5fc0;
}

.shopBtn {
  width: 48px;
  height: 48px;
  padding: 0;
  background: linear-gradient(135deg, #c28b4b 0%, #d4a05d 100%);
  border: 2px solid #FFD700;
  color: white;
  font-size: 24px;
  font-weight: bold;
  border-radius: 8px;
  transition: all 0.2s;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(194, 139, 75, 0.4);
  flex-shrink: 0;
}

.shopBtn:hover {
  background: linear-gradient(135deg, #d49b5b 0%, #e4b06d 100%);
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(194, 139, 75, 0.6);
}

.shopBtn:active {
  transform: scale(0.95);
}

/* Augment Cards */
.augmentCard {
  background: #1a1a1a;
  border: 3px solid #6b3fa0;
  border-radius: 10px;
  padding: 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
}

.augmentCard:hover {
  transform: translateY(-10px) scale(1.05);
  box-shadow: 0 10px 30px rgba(107, 63, 160, 0.6);
  border-width: 4px;
}

.augmentCard:active {
  transform: translateY(-5px) scale(1.02);
}

/* Desktop Only - Mobilde gizle */
.desktopOnly {
  display: block;
}

@media (max-width: 1024px) {
  .desktopOnly {
    display: none !important;
  }
}

/* MOBILE RESPONSIVE */

@media (max-width: 1024px) {
  #gameScreen {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr auto;
    gap: 0;
  }
  
  .leftPanel {
    order: 1;
    max-height: none;
    padding: 10px;
    overflow-y: visible; /* Scroll kaldır */
  }

  /* Mobilde özel düzenleme */
  .leftPanel {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* Eşyalar bölümü için özel yükseklik */
  .leftBox:has(#itemGrid) {
    max-height: 150px;
    overflow-y: auto;
  }

  /* Özellikler bölümü için özel yükseklik */
  .leftBox:has(#featuresArea) {
    max-height: 180px;
    overflow-y: auto;
  }

  .mobileHeader {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 10px;
    align-items: start;
  }

  .mobileStats {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .portrait {
    width: 80px;
    height: 80px;
    margin: 0;
  }
  
  .centerPanel {
    order: 2;
    min-height: 400px;
  }
  
  .rightPanel {
    order: 3;
    max-height: 200px;
  }
  
  .itemGrid {
    grid-template-columns: repeat(6, 1fr);
  }
  
  .battleArea {
    padding: 10px;
  }
  
  .enemyCard {
    min-width: 120px;
  }
  
  .enemyCard img {
    width: 80px;
    height: 80px;
  }
}

@media (max-width: 768px) {
  .panel {
    margin: 2px;
    padding: 8px;
    border-width: 2px;
  }
  
  .centerPanel {
    margin: 2px;
    padding: 8px;
    border-width: 2px;
    min-height: 300px;
  }

  .leftPanel {
    padding: 8px;
  }

  /* Eşyalar için daha fazla alan */
  .leftBox:has(#itemGrid) {
    max-height: 180px;
    overflow-y: auto;
  }
  .leftBox:has(#itemGrid) {
    max-height: 120px; /* ✅ 180px → 120px */
    overflow-y: auto;
    min-height: 120px; /* ✅ Yeni */
  }

  /* Özellikler için kompakt alan */
  .leftBox:has(#featuresArea) {
    max-height: 150px;
    overflow-y: auto;
  }

  .mobileHeader {
    grid-template-columns: 70px 1fr;
    gap: 8px;
  }
  
  .portrait {
    width: 70px !important;
    height: 70px !important;
  }

  #charName {
    font-size: 14px;
  }
  
  .leftBox {
    padding: 6px;
  }
  
  .leftBox h3 {
    font-size: 12px;
  }
  
  #statsText {
    font-size: 10px !important;
  }
  
  .battleButtons button {
    padding: 10px 12px;
    font-size: 13px;
    min-width: 70px;
  }
  
  .itemGrid {
    grid-template-columns: repeat(5, 1fr);
    gap: 3px;
  }
  
  .charCard {
    width: calc(50% - 7.5px);
    min-width: 140px;
  }
  
  .charCard img {
    width: 64px;
    height: 64px;
  }
  
  #shopGrid {
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 8px;
  }
  
  .shopPanel img {
    width: 48px;
    height: 48px;
  }
  
  .rightPanel {
    max-height: none;
    min-height: 300px;
    flex: 1;
  }
  
  #achievementArea {
    max-height: 120px;
  }
  
  .log {
    flex: 1;
    min-height: 150px;
  }

  .barContainer {
    margin-top: 2px;
  }

  .barValueText {
    font-size: 10px;
    top: -14px;
  }
  
  .itemGrid {
    grid-template-columns: repeat(8, 1fr); /* ✅ 6 → 8 */
    gap: 1px; /* ✅ 2px → 1px */
  }
  
  .itemSlot {
    border-width: 1px;
  }
  
  .itemSlot img {
    max-width: 50%;
    max-height: 50%;
  }
  
  .stackCount {
    font-size: 9px;
  }
  
  .passiveBadge {
    font-size: 8px;
  }
}

@media (max-width: 480px) {
  .charCard {
    width: 100%;
    max-width: 280px;
  }

  .mobileHeader {
    grid-template-columns: 60px 1fr;
  }

  .portrait {
    width: 60px !important;
    height: 60px !important;
  }

  #charName {
    font-size: 13px;
  }

  /* Mobilde eşyalar ve özellikler için alan */
  .leftBox:has(#itemGrid) {
    max-height: 160px;
    overflow-y: auto;
  }

  .leftBox:has(#featuresArea) {
    max-height: 140px;
    overflow-y: auto;
  }
  
  .battleButtons {
    gap: 6px;
  }
  
  .battleButtons button {
    padding: 10px 8px;
    font-size: 12px;
    min-width: 60px;
  }
  
  .enemyCard {
    min-width: 100px;
    padding: 8px;
  }
  
  .enemyCard img {
    width: 70px;
    height: 70px;
  }
  
  .itemGrid {
    grid-template-columns: repeat(5, 1fr);
    gap: 2px;
  }
  
  .itemSlot {
    border-width: 1px;
  }
  
  .itemSlot img {
    max-width: 60%;
    max-height: 60%;
  }
  
  .stackCount {
    font-size: 8px;
    padding: 1px 2px;
  }
  
  .passiveBadge {
    font-size: 7px;
    padding: 1px 2px;
  }
  
  .tooltip {
    font-size: 11px;
    max-width: 160px;
  }
  
  #shopGrid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .rightPanel {
    max-height: none;
    min-height: 250px;
  }
  
  #achievementArea {
    max-height: 100px;
  }
  
  .log {
    min-height: 120px;
  }
  
  .log {
    font-size: 11px;
  }

  .centerPanel {
    min-height: 300px;
  }

  .selectButtons {
    padding: 15px 10px;
  }

  #confirmBtn {
    padding: 16px;
    font-size: 15px;
  }

  #companionGrid {
    grid-template-columns: 1fr;
  }
}

/* Landscape mode için özel kurallar */
@media (max-height: 500px) and (orientation: landscape) {
  #gameScreen {
    grid-template-columns: 200px 1fr 200px;
    grid-template-rows: 1fr;
  }
  
  .leftPanel, .rightPanel {
    max-height: 100vh;
  }
  
  .portrait {
    width: 48px;
    height: 48px;
  }
  
  .leftBox {
    padding: 4px;
  }
  
  .itemGrid {
    grid-template-columns: repeat(3, 1fr);
  }
}
/* Mobil koridor düzeni */
@media (max-width: 768px) {
  #battleArea > div {
    grid-template-columns: 1fr !important;
    gap: 5px !important;
  }
  
  .lane {
    min-height: 150px !important;
  }
}
/* Hedef pulse animasyonu */
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.8;
  }
}

/* Hedef pulse animasyonu - Renk Kodlu */
@keyframes targetPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.15);
    opacity: 0.85;
  }
}

/* Düşman kartı */
.enemy-card {
  cursor: pointer;
}

.enemy-card:hover {
  transform: translateY(-5px) scale(1.02) !important;
}

/* Lane container */
.lane {
  backdrop-filter: blur(5px);
}

/* Mobil düzenleme */
@media (max-width: 768px) {
  #battleArea > div {
    grid-template-columns: 1fr !important;
    gap: 10px !important;
  }
  
  .lane {
    min-height: 300px !important;
  }
  
  .enemy-card img {
    width: 70px !important;
    height: 70px !important;
  }
}

@media (max-width: 480px) {
  .lane {
    padding: 10px !important;
    min-height: 250px !important;
  }
  
  .enemy-card {
    padding: 10px !important;
  }
  
  .enemy-card img {
    width: 60px !important;
    height: 60px !important;
  }
}

/* ========== KORİDOR ANİMASYONLARI ========== */

/* Seçili koridor pulse glow */
@keyframes lanePulse {
  0%, 100% {
    box-shadow: 0 0 25px var(--lane-glow), inset 0 0 20px var(--lane-glow);
  }
  50% {
    box-shadow: 0 0 40px var(--lane-glow), inset 0 0 30px var(--lane-glow);
  }
}

/* Seçili koridor arka plan ışık kayması */
@keyframes laneGradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Koridor tıklama animasyonu */
@keyframes laneClick {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.98);
  }
  100% {
    transform: scale(1);
  }
}

/* Koridor sallama (saldırı) */
@keyframes laneShake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  75% {
    transform: translateX(5px);
  }
}

/* Hedef pulse */
@keyframes targetPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.15);
    opacity: 0.85;
  }
}

/* Damage number animasyonu */
@keyframes damageFloat {
  0% {
    transform: translateY(0) scale(0.5);
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  100% {
    transform: translateY(-80px) scale(1.2);
    opacity: 0;
  }
}

/* Flash efekti */
@keyframes flashWhite {
  0%, 100% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(3);
  }
}

/* Tur başlangıcı glow */
@keyframes turnStartGlow {
  0% {
    box-shadow: 0 0 25px var(--lane-glow), inset 0 0 20px var(--lane-glow);
  }
  50% {
    box-shadow: 0 0 50px var(--lane-glow), inset 0 0 40px var(--lane-glow), 0 0 80px var(--lane-glow);
  }
  100% {
    box-shadow: 0 0 25px var(--lane-glow), inset 0 0 20px var(--lane-glow);
  }
}

/* Boş koridor noise pattern */
@keyframes noisePattern {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 100px 100px;
  }
}

/* ========== SINIFLAR ========== */

.lane {
  transition: all 0.3s ease;
}

.lane.selected {
  animation: lanePulse 2s ease-in-out infinite;
}

.lane.selected::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    45deg,
    transparent 0%,
    var(--lane-glow-subtle) 50%,
    transparent 100%
  );
  background-size: 200% 200%;
  animation: laneGradient 3s ease infinite;
  opacity: 0.15;
  pointer-events: none;
  border-radius: 12px;
}

.lane.clicked {
  animation: laneClick 150ms ease;
}

.lane.attacking {
  animation: laneShake 200ms ease;
}

.lane.turn-start {
  animation: turnStartGlow 800ms ease;
}

.lane.empty {
  background: 
    linear-gradient(180deg, rgba(15,15,15,0.98) 0%, rgba(10,10,10,0.99) 100%),
    repeating-linear-gradient(
      45deg,
      rgba(255,255,255,0.01) 0px,
      rgba(255,255,255,0.01) 2px,
      transparent 2px,
      transparent 4px
    );
  background-size: 100% 100%, 100px 100px;
  animation: noisePattern 20s linear infinite;
}

.enemy-card {
  cursor: pointer;
  transition: all 0.3s ease;
}

.enemy-card.target-highlight {
  transform: translateY(-8px);
  filter: brightness(1.2);
  box-shadow: 0 0 30px var(--lane-glow), 0 8px 25px rgba(0,0,0,0.6) !important;
}

.enemy-card.flash {
  animation: flashWhite 100ms ease;
}

.damage-number {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 32px;
  font-weight: bold;
  color: #ff3333;
  text-shadow: 
    0 0 10px #ff0000,
    0 0 20px #ff0000,
    2px 2px 4px rgba(0,0,0,0.8);
  pointer-events: none;
  z-index: 1000;
  animation: damageFloat 1s ease-out forwards;
}

/* Mobil uyumluluk */
@media (max-width: 768px) {
  .damage-number {
    font-size: 24px;
  }
  
  .lane.attacking {
    animation: laneShake 150ms ease;
  }
}

/* ========== KORİDOR SİSTEMİ - RESPONSIVE ========== */

/* Koridor container */
#battleArea {
  width: 100%;
  padding: 10px;
}

.lanes-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 15px;
  width: 100%;
}

/* Lane base style */
.lane {
  --lane-glow: rgba(255, 255, 255, 0.3);
  --lane-glow-subtle: rgba(255, 255, 255, 0.05);
  
  border: 3px solid #444;
  background: linear-gradient(180deg, rgba(26,26,26,0.95) 0%, rgba(15,15,15,0.98) 100%);
  border-radius: 12px;
  padding: 15px;
  cursor: pointer;
  min-height: 400px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  position: relative;
  overflow: hidden;
  
  /* Smooth transitions */
  transition: all 0.3s ease, opacity 0.2s ease, transform 0.1s ease;
  
  /* Default state */
  opacity: 0.6;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Lane NOT selected - karartılmış */
.lane:not(.selected) {
  opacity: 0.5;
  filter: brightness(0.7);
}

/* Lane selected - parlak ve vurgulu */
.lane.selected {
  opacity: 1 !important;
  filter: brightness(1) !important;
  border-width: 5px !important;
  box-shadow: 0 0 30px var(--lane-glow), 
              0 0 60px var(--lane-glow),
              inset 0 0 30px var(--lane-glow) !important;
  animation: lanePulse 2s ease-in-out infinite;
  z-index: 10;
}

/* Hover - sadece seçili olmayanlarda */
.lane:not(.selected):hover {
  opacity: 0.7;
  transform: scale(1.02);
  border-color: #666;
}

/* Tıklama feedback */
.lane.clicked {
  animation: laneClick 150ms ease;
}

/* Saldırı animasyonu */
.lane.attacking {
  animation: laneShake 250ms ease;
}

/* Tur başlangıcı */
.lane.turn-start {
  animation: turnStartGlow 800ms ease;
}

/* Boş koridor */
.lane.empty {
  background: 
    linear-gradient(180deg, rgba(15,15,15,0.98) 0%, rgba(10,10,10,0.99) 100%),
    repeating-linear-gradient(
      45deg,
      rgba(255,255,255,0.01) 0px,
      rgba(255,255,255,0.01) 2px,
      transparent 2px,
      transparent 4px
    );
  background-size: 100% 100%, 100px 100px;
  animation: noisePattern 20s linear infinite;
}

/* Animated gradient overlay - sadece seçilide */
.lane.selected::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    45deg,
    transparent 0%,
    var(--lane-glow-subtle) 50%,
    transparent 100%
  );
  background-size: 200% 200%;
  animation: laneGradient 3s ease infinite;
  opacity: 0.2;
  pointer-events: none;
  border-radius: 12px;
  z-index: 0;
}

/* Dekoratif üst çizgi */
.lane-top-line {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: var(--lane-border);
  z-index: 1;
  transition: all 0.3s ease;
}

.lane.selected .lane-top-line {
  height: 6px;
  box-shadow: 0 0 20px var(--lane-glow);
}

/* Düşman kartları */
.enemy-card {
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  z-index: 2;
}

.enemy-card.target-highlight {
  transform: translateY(-8px);
  filter: brightness(1.3);
  box-shadow: 0 0 35px var(--lane-glow), 0 10px 30px rgba(0,0,0,0.6) !important;
}

.enemy-card.flash {
  animation: flashWhite 120ms ease;
}

.damage-number {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 36px;
  font-weight: bold;
  color: #ff3333;
  text-shadow: 
    0 0 10px #ff0000,
    0 0 20px #ff0000,
    0 0 30px #ff0000,
    2px 2px 4px rgba(0,0,0,0.9);
  pointer-events: none;
  z-index: 1000;
  animation: damageFloat 1s ease-out forwards;
}

/* ========== ANİMASYONLAR ========== */

@keyframes lanePulse {
  0%, 100% {
    box-shadow: 0 0 30px var(--lane-glow), 
                0 0 60px var(--lane-glow),
                inset 0 0 30px var(--lane-glow);
  }
  50% {
    box-shadow: 0 0 50px var(--lane-glow), 
                0 0 90px var(--lane-glow),
                inset 0 0 50px var(--lane-glow);
  }
}

@keyframes laneGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes laneClick {
  0% { transform: scale(1); }
  50% { transform: scale(0.97); }
  100% { transform: scale(1); }
}

@keyframes laneShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-6px) rotate(-1deg); }
  75% { transform: translateX(6px) rotate(1deg); }
}

@keyframes turnStartGlow {
  0% {
    box-shadow: 0 0 30px var(--lane-glow), inset 0 0 30px var(--lane-glow);
  }
  50% {
    box-shadow: 0 0 70px var(--lane-glow), 
                0 0 100px var(--lane-glow),
                inset 0 0 60px var(--lane-glow);
  }
  100% {
    box-shadow: 0 0 30px var(--lane-glow), inset 0 0 30px var(--lane-glow);
  }
}

@keyframes targetPulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.15); opacity: 0.85; }
}

@keyframes damageFloat {
  0% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -150%) scale(1.3);
    opacity: 0;
  }
}

@keyframes flashWhite {
  0%, 100% { filter: brightness(1); }
  50% { filter: brightness(3.5); }
}

@keyframes noisePattern {
  0% { background-position: 0 0; }
  100% { background-position: 100px 100px; }
}

/* ========== SAVAŞ GÜNLÜĞÜ TOGGLE ========== */

.log-toggle-btn {
  display: none; /* Desktop'ta gizli */
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #6b3fa0;
  border: 3px solid gold;
  color: white;
  font-size: 20px;
  cursor: pointer;
  z-index: 1000;
  box-shadow: 0 4px 15px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
}

.log-toggle-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(107,63,160,0.6);
}

.log-toggle-btn.active {
  background: gold;
  color: #111;
}

/* ========== MOBİL RESPONSIVE ========== */

@media (max-width: 1024px) {
  /* Savaş günlüğü toggle göster */
  .log-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Sağ panel mobilde overlay */
  .rightPanel {
    position: fixed;
    top: 0;
    right: -100%;
    width: 90%;
    max-width: 400px;
    height: 100vh;
    z-index: 999;
    transition: right 0.3s ease;
    box-shadow: -5px 0 20px rgba(0,0,0,0.5);
  }
  
  .rightPanel.active {
    right: 0;
  }
  
  /* Sol panel tam genişlik */
  .leftPanel {
    width: 100% !important;
    padding: 10px;
  }
  
  /* Battle area tam genişlik */
  #battleArea {
    padding: 5px;
  }
}

@media (max-width: 768px) {
  /* Koridorlar ALT ALTA */
  .lanes-container {
    grid-template-columns: 1fr !important;
    gap: 10px !important;
  }
  
  .lane {
    min-height: 250px !important;
    padding: 12px;
  }
  
  .lane.selected {
    border-width: 4px !important;
  }
  
  .enemy-card {
    padding: 12px !important;
  }
  
  .enemy-card img {
    width: 70px !important;
    height: 70px !important;
  }
  
  .damage-number {
    font-size: 28px !important;
  }
  
  /* Butonlar büyüsün */
  #attackBtn, #skillBtn, #defendBtn {
    padding: 14px 20px !important;
    font-size: 16px !important;
    min-height: 50px;
  }
  
  /* Item grid mobilde */
  .itemGrid {
    grid-template-columns: repeat(6, 1fr) !important;
    gap: 3px !important;
  }
  
  .itemSlot img {
    max-width: 45% !important;
    max-height: 45% !important;
  }
}

@media (max-width: 480px) {
  .lane {
    min-height: 220px !important;
    padding: 10px;
  }
  
  .enemy-card {
    padding: 10px !important;
    gap: 8px !important;
  }
  
  .enemy-card img {
    width: 60px !important;
    height: 60px !important;
  }
  
  .damage-number {
    font-size: 24px !important;
  }
  
  /* Butonlar daha büyük */
  #attackBtn, #skillBtn, #defendBtn {
    padding: 16px 24px !important;
    font-size: 18px !important;
    min-height: 55px;
  }
  
  /* Item grid daha sık */
  .itemGrid {
    grid-template-columns: repeat(8, 1fr) !important;
    gap: 2px !important;
  }
}

/* ========== LANDSCAPE MOBİL ========== */

@media (max-width: 900px) and (orientation: landscape) {
  .lanes-container {
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 8px !important;
  }
  
  .lane {
    min-height: 200px !important;
    padding: 8px;
  }
  
  .enemy-card {
    padding: 8px !important;
  }
  
  .enemy-card img {
    width: 50px !important;
    height: 50px !important;
  }
}

/* ========== MOBİL FLOATING ACTION PANEL ========== */

.floating-action-panel {
  position: fixed;
  bottom: -200px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, #2a1a3a 0%, #1a0a2a 100%);
  border: 3px solid gold;
  border-radius: 20px 20px 0 0;
  padding: 20px;
  box-shadow: 0 -5px 30px rgba(0,0,0,0.8), 0 0 20px rgba(255,215,0,0.3);
  z-index: 9999;
  width: 95%;
  max-width: 500px;
  transition: bottom 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  backdrop-filter: blur(10px);
}

.floating-action-panel.active {
  bottom: 0;
}

.floating-action-panel-header {
  text-align: center;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 2px solid rgba(255,215,0,0.3);
}

.floating-action-panel-title {
  font-size: 16px;
  font-weight: bold;
  color: gold;
  margin-bottom: 5px;
}

.floating-action-panel-target {
  font-size: 12px;
  color: #aaa;
}

.floating-action-buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.floating-action-btn {
  padding: 15px 10px;
  font-size: 14px;
  font-weight: bold;
  border: 2px solid;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.floating-action-btn:active {
  transform: scale(0.95);
}

.floating-action-btn.attack {
  background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
  border-color: #ff6b6b;
  color: white;
}

.floating-action-btn.skill {
  background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);
  border-color: #ce93d8;
  color: white;
}

.floating-action-btn.defend {
  background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
  border-color: #5dade2;
  color: white;
}

.floating-action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.floating-action-btn .cost-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background: rgba(0,0,0,0.8);
  border: 2px solid gold;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: bold;
  color: #2196f3;
}

.floating-action-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 9998;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.floating-action-overlay.active {
  opacity: 1;
  pointer-events: all;
}

/* ========== MOBİL KARAKTER PANELİ DRAWER ==========*/

.character-drawer-btn:active {
  transform: scale(0.9);
}

.character-drawer-btn.active {
  background: linear-gradient(135deg, gold 0%, #d4af37 100%);
  color: #111;
}

.character-drawer {
  position: fixed;
  bottom: -100%;
  left: 0;
  width: 100%;
  max-height: 70vh;
  background: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%);
  border-top: 3px solid gold;
  border-radius: 20px 20px 0 0;
  z-index: 999;
  overflow-y: auto;
  transition: bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 -10px 40px rgba(0,0,0,0.8);
}

.character-drawer.active {
  bottom: 0;
}

.character-drawer-header {
  position: sticky;
  top: 0;
  background: #1a1a1a;
  padding: 15px;
  border-bottom: 2px solid #333;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 10;
}

.character-drawer-title {
  font-size: 18px;
  font-weight: bold;
  color: gold;
}

.character-drawer-close {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #333;
  border: 2px solid #555;
  color: white;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.character-drawer-content {
  padding: 15px;
}

/* ========== MOBİL RESPONSIVE LAYOUT ========== */

@media (max-width: 768px) {
  /* Desktop butonları gizle */
  #attackBtn, #skillBtn, #defendBtn {
    display: none !important;
  }
  
  /* Floating action butonu göster */
  .character-drawer-btn {
    display: flex !important;
  }
  
  /* Üst panel gizle */
  .leftPanel {
    display: none;
  }
  
  /* Battle area tam ekran */
  #battleArea {
    width: 100%;
    height: calc(100vh - 100px);
    padding: 10px;
    overflow-y: auto;
  }
  
  /* Koridorlar dikey */
  .lanes-container {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
    padding-bottom: 80px; /* Floating panel için alan */
  }
  
  .lane {
    min-height: 220px !important;
    padding: 12px !important;
  }
  
  /* Düşman kartları büyüt */
  .enemy-card {
    padding: 12px !important;
  }
  
  .enemy-card img {
    width: 80px !important;
    height: 80px !important;
  }
  
  /* Item grid büyüt */
  .itemGrid {
    grid-template-columns: repeat(5, 1fr) !important;
    gap: 8px !important;
  }
  
  .itemSlot {
    width: 60px !important;
    height: 60px !important;
  }
  
  .itemSlot img {
    max-width: 70% !important;
    max-height: 70% !important;
  }
  
  /* Sağ panel overlay */
  .rightPanel {
    position: fixed;
    top: 0;
    right: -100%;
    width: 90%;
    max-width: 400px;
    height: 100vh;
    z-index: 998;
    transition: right 0.3s ease;
    box-shadow: -5px 0 20px rgba(0,0,0,0.5);
  }
  
  .rightPanel.active {
    right: 0;
  }
  
  /* Log toggle butonu */
  .log-toggle-btn {
    display: flex !important;
    bottom: 90px; /* Drawer butonunun üstünde */
  }
}

@media (max-width: 480px) {
  .lane {
    min-height: 200px !important;
    padding: 10px !important;
  }
  
  .enemy-card {
    padding: 10px !important;
    gap: 8px !important;
  }
  
  .enemy-card img {
    width: 70px !important;
    height: 70px !important;
  }
  
  .floating-action-buttons {
    grid-template-columns: 1fr !important;
    gap: 8px !important;
  }
  
  .floating-action-btn {
    padding: 18px 15px !important;
    font-size: 16px !important;
  }
  
  .character-drawer-btn {
    width: 55px !important;
    height: 55px !important;
    font-size: 22px !important;
  }
  
  .itemGrid {
    grid-template-columns: repeat(6, 1fr) !important;
    gap: 6px !important;
  }
  
  .itemSlot {
    width: 50px !important;
    height: 50px !important;
  }
}

/* Landscape mobil */
@media (max-width: 900px) and (orientation: landscape) {
  .lanes-container {
    grid-template-columns: repeat(3, 1fr) !important;
  }
  
  .lane {
    min-height: 180px !important;
  }
  
  .enemy-card img {
    width: 60px !important;
    height: 60px !important;
  }
  
  .character-drawer {
    max-height: 60vh !important;
  }
}

/* ========== MOBİL KARAKTER DRAWER SİSTEMİ ========== */

.character-drawer-btn {
  display: none;
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, #6b3fa0 0%, #4a2870 100%);
  border: 3px solid gold;
  color: white;
  font-size: 24px;
  cursor: pointer;
  z-index: 1000;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
  align-items: center;
  justify-content: center;
}

.character-drawer-btn:active {
  transform: scale(0.9);
}

.character-drawer-btn.active {
  background: linear-gradient(135deg, gold 0%, #d4af37 100%);
  color: #111;
  transform: rotate(180deg);
}

.log-toggle-btn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, #6b3fa0 0%, #4a2870 100%);
  border: 3px solid gold;
  color: white;
  font-size: 24px;
  cursor: pointer;
  z-index: 1000;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
}

.log-toggle-btn:active {
  transform: scale(0.9);
}

.log-toggle-btn.active {
  background: linear-gradient(135deg, gold 0%, #d4af37 100%);
  color: #111;
}

.character-drawer {
  position: fixed;
  bottom: -100%;
  left: 0;
  width: 100%;
  max-height: 65vh;
  background: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%);
  border-top: 4px solid gold;
  border-radius: 20px 20px 0 0;
  z-index: 999;
  overflow-y: auto;
  transition: bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 -10px 40px rgba(0,0,0,0.9);
  padding: 20px 15px;
}

.character-drawer.active {
  bottom: 0;
}

.character-drawer-content {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.drawer-character-section {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 15px;
  background: rgba(107, 63, 160, 0.1);
  border: 2px solid rgba(255, 215, 0, 0.3);
  border-radius: 12px;
}

.drawer-portrait {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  border: 3px solid gold;
  object-fit: cover;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
}

.drawer-bars-stats {
  flex: 1;
}

.drawer-bar-container {
  margin-bottom: 8px;
}

.drawer-bar-label {
  font-size: 12px;
  color: #aaa;
  margin-bottom: 3px;
}

.drawer-bar {
  width: 100%;
  height: 8px;
  background: #222;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid #444;
}

.drawer-bar-fill {
  height: 100%;
  transition: width 0.3s;
}

.drawer-hp-fill {
  background: linear-gradient(90deg, #e74c3c 0%, #c0392b 100%);
}

.drawer-mana-fill {
  background: linear-gradient(90deg, #3498db 0%, #2980b9 100%);
}

.drawer-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  padding: 12px;
  background: rgba(26, 26, 26, 0.8);
  border: 2px solid #333;
  border-radius: 10px;
}

.drawer-stat-item {
  font-size: 12px;
  color: #ccc;
  padding: 6px;
  background: rgba(50, 50, 50, 0.5);
  border-radius: 6px;
  text-align: center;
}

.drawer-stat-value {
  font-weight: bold;
  color: gold;
  font-size: 14px;
}

.drawer-items {
  padding: 12px;
  background: rgba(26, 26, 26, 0.8);
  border: 2px solid #333;
  border-radius: 10px;
}

.drawer-section-title {
  font-size: 14px;
  font-weight: bold;
  color: gold;
  margin-bottom: 10px;
  text-align: center;
}

.drawer-item-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
}

.drawer-item-slot {
  width: 100%;
  aspect-ratio: 1;
  background: #222;
  border: 2px solid #444;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  cursor: pointer;
  transition: all 0.2s;
}

.drawer-item-slot:active {
  transform: scale(0.95);
}

.drawer-item-slot img {
  width: 70%;
  height: 70%;
  object-fit: contain;
}

.drawer-item-slot.passive::after {
  content: 'P';
  position: absolute;
  top: -5px;
  right: -5px;
  background: #9c27b0;
  color: white;
  font-size: 10px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid #000;
}

.drawer-item-slot .stack-count {
  position: absolute;
  bottom: 2px;
  right: 2px;
  background: rgba(0,0,0,0.8);
  color: gold;
  font-size: 10px;
  font-weight: bold;
  padding: 2px 4px;
  border-radius: 3px;
  border: 1px solid gold;
}

.drawer-features {
  padding: 12px;
  background: rgba(26, 26, 26, 0.8);
  border: 2px solid #333;
  border-radius: 10px;
}

.drawer-feature-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 8px;
  background: rgba(50, 50, 50, 0.5);
  border-radius: 8px;
  margin-bottom: 8px;
  border-left: 3px solid;
}

.drawer-feature-item.passive {
  border-left-color: #9c27b0;
}

.drawer-feature-item.companion {
  border-left-color: #4caf50;
}

.drawer-feature-item.augment {
  border-left-color: #ffd700;
}

.drawer-feature-icon {
  width: 35px;
  height: 35px;
  border-radius: 8px;
  object-fit: cover;
  border: 2px solid #555;
  flex-shrink: 0;
}

.drawer-feature-text {
  flex: 1;
}

.drawer-feature-name {
  font-size: 12px;
  font-weight: bold;
  color: gold;
  margin-bottom: 3px;
}

.drawer-feature-desc {
  font-size: 11px;
  color: #aaa;
  line-height: 1.3;
}

@media (max-width: 768px) {
  .character-drawer-btn {
    display: flex !important;
  }
  
  .log-toggle-btn {
    display: flex !important;
  }
  
  .leftPanel {
    display: none;
  }
  
  #battleArea {
    width: 100%;
    height: calc(100vh - 100px);
    padding: 10px;
    overflow-y: auto;
  }
  
  .lanes-container {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
    padding-bottom: 100px;
  }
  
  .rightPanel {
    position: fixed;
    top: 0;
    right: -100%;
    width: 90%;
    max-width: 400px;
    height: 100vh;
    z-index: 998;
    transition: right 0.3s ease;
    box-shadow: -5px 0 20px rgba(0,0,0,0.5);
  }
  
  .rightPanel.active {
    right: 0;
  }
}

@media (max-width: 480px) {
  .character-drawer-btn,
  .log-toggle-btn {
    width: 55px !important;
    height: 55px !important;
    font-size: 22px !important;
  }
  
  .drawer-item-grid {
    grid-template-columns: repeat(6, 1fr) !important;
  }
}